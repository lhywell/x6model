(function(t){function e(e){for(var o,r,s=e[0],c=e[1],l=e[2],p=0,f=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},i={app:0},a=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/x6model/dist/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2010:function(t,e,n){},"3ae8":function(t,e,n){"use strict";var o=n("6186"),i=n.n(o);i.a},"4f90":function(t,e,n){"use strict";var o=n("f5c4"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("editor-com")],1)},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor"},[n("h1",[t._v("战法模型")]),n("div",{staticClass:"content"},[n("div",{ref:"stencilContainer",staticClass:"app-stencil"}),n("div",{staticClass:"panel"},[n("Toolbar"),n("div",{ref:"x6Editor",staticClass:"app-content",attrs:{id:"app-content"}})],1)]),t._t("rightPane",[n("modal",{attrs:{show:t.showAttrConfig,title:"属性配置"},on:{"update:show":function(e){t.showAttrConfig=e}},nativeOn:{keyup:function(t){t.stopPropagation()}}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("el-form",{attrs:{model:t.nodeFrmData,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:t.nodeFrmData.name,callback:function(e){t.$set(t.nodeFrmData,"name",e)},expression:"nodeFrmData.name"}})],1),n("el-form-item",{attrs:{label:"属性1",prop:"属性1"}},[n("el-input",{model:{value:t.nodeFrmData.属性1,callback:function(e){t.$set(t.nodeFrmData,"属性1",e)},expression:"nodeFrmData.属性1"}})],1),n("el-form-item",{attrs:{label:"属性2",prop:"属性2"}},[n("el-input",{model:{value:t.nodeFrmData.属性2,callback:function(e){t.$set(t.nodeFrmData,"属性2",e)},expression:"nodeFrmData.属性2"}})],1)],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.close}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")])],1)])])],2)},s=[],c=(n("4160"),n("b0c0"),n("159b"),n("d4ec")),l=n("bee2"),u=n("5728"),p=function(){function t(e){Object(c["a"])(this,t),this.graph=null}return Object(l["a"])(t,[{key:"init",value:function(){var t=document.documentElement.clientHeight-48-39,e={container:document.getElementById("app-content"),height:t,history:!0,grid:{size:10,visible:!0,type:"doubleMesh",args:[{color:"#c5c5c5",thickness:1}]},snapline:{enabled:!0,sharp:!0},selecting:{enabled:!0,showNodeSelectionBox:!0},keyboard:{enabled:!0,global:!0,escape:!0},clipboard:{enabled:!0,offset:30,useLocalStorage:!0},panning:!0,connecting:{snap:!0,allowBlank:!1,allowLoop:!1,allowNode:!1,highlight:!0,connector:{name:"smooth"},validateMagnet:function(t){var e=t.magnet;return"in"!==e.getAttribute("port-group")},validateConnection:function(t){var e=t.sourceMagnet,n=t.targetMagnet;return!(!e||"in"===e.getAttribute("port-group"))&&!(!n||"in"!==n.getAttribute("port-group"))}}};return this.graph=new u["c"](e),this.graph.centerContent(),this.graph}}]),t}(),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"modal"}},[t.show?n("div",{staticClass:"cus-modal"},[n("div",{staticClass:"close",on:{click:t.close}},[n("i",{staticClass:"el-icon-close"})]),n("div",{staticClass:"header"},[t._t("header",[t._v(t._s(t.title)+"22222")])],2),n("div",{staticClass:"content"},[t._t("content")],2),n("div",{staticClass:"footer"},[t._t("footer")],2)]):t._e()])},d=[],h={props:{show:{required:!0,type:Boolean,default:function(){return!1}},title:String},methods:{close:function(){this.$emit("update:show",!1)}}},g=h,m=(n("91cc"),n("2877")),v=Object(m["a"])(g,f,d,!1,null,"6570c364",null),b=v.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tool-bar"},[n("i",{staticClass:"iconfont iconqingchu",attrs:{title:"清除"},on:{click:t.clear}}),n("span",{staticClass:"line"}),n("i",{staticClass:"iconfont iconundo",attrs:{title:"撤销"},on:{click:t.undo}}),n("i",{staticClass:"iconfont iconredo",attrs:{title:"重做"},on:{click:t.redo}}),n("span",{staticClass:"line"}),n("i",{staticClass:"el-icon-zoom-in",attrs:{title:"放大"},on:{click:function(e){t.scaleView(e,"up")}}}),n("i",{staticClass:"el-icon-zoom-out",attrs:{title:"缩小"},on:{click:function(e){t.scaleView(e,"down")}}}),n("span",{staticClass:"line"}),n("i",{staticClass:"iconfont iconcopy",attrs:{title:"复制"},on:{click:t.copy}}),n("i",{staticClass:"iconfont iconcut",attrs:{title:"剪切"},on:{click:t.cut}}),n("i",{staticClass:"iconfont iconpaste",attrs:{title:"粘贴"},on:{click:t.paste}}),n("span",{staticClass:"line"}),n("i",{staticClass:"iconfont iconsave",attrs:{title:"保存"},on:{click:t.save}}),n("i",{staticClass:"iconfont iconinterface_printer_line",attrs:{title:"打印"},on:{click:t.print}}),n("span",{staticClass:"toJSON",attrs:{title:"toJSON"},on:{click:t.toJSON}},[t._v("toJSON")])])},y=[],C=(n("bf19"),{name:"Toolbar",data:function(){return{}},mounted:function(){},methods:{clear:function(){this.$graph.clearCells(),this.showAttrConfig=!1},undo:function(){this.$graph.undo()},redo:function(){this.$graph.redo()},copy:function(){var t=this.$graph.getSelectedCells();t&&t.length?(this.$graph.copy(t),this.$message.success("复制成功")):this.$message.info("请先选中节点再复制")},cut:function(){var t=this.$graph.getSelectedCells();t.length&&this.$graph.cut(t)},paste:function(){if(this.$graph.isClipboardEmpty())this.$message.info("剪切板为空，不可粘贴");else{var t=this.$graph.paste(this.options);this.$graph.cleanSelection(),this.$graph.select(t),this.$message.success("粘贴成功")}},scaleView:function(t,e){t.preventDefault(),"up"===e?this.$graph.zoom(.1):this.$graph.zoom(-.1)},save:function(){this.$graph.toPNG((function(t){u["b"].downloadDataUri(t,"chart.png")}))},print:function(){this.$graph.printPreview()},toJSON:function(){console.log(this.$graph.toJSON())}}}),k=C,$=(n("4f90"),Object(m["a"])(k,w,y,!1,null,null,null)),_=$.exports,O=u["a"].Stencil,D=u["d"].BorderedImage,S={data:function(){return{showAttrConfig:!1,nodeFrmData:{},viewTranslate:{graphX:0,graphY:0}}},beforeDestroy:function(){},mounted:function(){this.initRight()},methods:{initRight:function(){var t=new p,e=t.init();this.initStencil(e),this.initEvent(e),this.initKey(e),o["default"].prototype.$graph=e},initStencil:function(t){var e=new O({title:"战法模型",target:t,collapsable:!0,stencilGraphWidth:200,stencilGraphHeight:280,groups:[{name:"group1",title:"数据源"},{name:"group2",title:"基础模型"}]});this.$refs.stencilContainer.appendChild(e.container);var n="/x6model/dist/",o=this.newImage("table-1",n+"table.svg"),i=this.newImage("table-2",n+"table.svg"),a=this.newImage("table-3",n+"table.svg"),r=this.newImage("table-4",n+"table.svg"),s=this.newImage("image-1",n+"bu.svg"),c=this.newImage("image-2",n+"cha.svg"),l=this.newImage("image-3",n+"fliter.svg"),u=this.newImage("image-4",n+"jiao.svg"),p=this.newImage("image-5",n+"bing.svg");e.load([o,i,a,r],"group1"),e.load([s,c,l,u,p],"group2")},initKey:function(t){var e=this;t.bindKey(["meta+d","ctrl+d"],(function(e){return t.clearCells(),!1}),"keyup"),t.bindKey(["ctrl+z"],(function(e){return t.undo(),!1}),"keyup"),t.bindKey(["meta+shift+z","ctrl+y"],(function(e){return t.redo(),!1})),t.bindKey(["ctrl+="],(function(e){return t.zoom(.1)})),t.bindKey(["ctrl+-"],(function(e){return t.zoom(-.1)})),t.bindKey(["meta+c","ctrl+c"],(function(e){var n=t.getSelectedCells();return n.length&&t.copy(n),!1}),"keyup"),t.bindKey(["meta+v","ctrl+v"],(function(e){if(!t.isClipboardEmpty()){var n=t.paste({offset:32});t.cleanSelection(),t.select(n)}return!1})),t.bindKey(["meta+x","ctrl+x"],(function(t){var n=e.$graph.getSelectedCells();return n.length&&e.$graph.cut(n),!1})),t.bindKey(["meta+s","ctrl+s"],(function(t){return e.$graph.toPNG((function(t){u["b"].downloadDataUri(t,"chart.png")})),!1})),t.bindKey(["meta+p","ctrl+p"],(function(e){t.printPreview()}))},initEvent:function(t){var e=this;function n(){t.drawBackground({color:"#fff"});var e=t.getNodes(),n=t.getEdges();e.forEach((function(t){t.attr("rect/stroke","#108ee9")})),n.forEach((function(t){t.attr("line/stroke","#108ee9"),t.prop("labels/0",{attrs:{body:{stroke:"#108ee9"}}})}))}t.on("selection:changed",(function(t){console.log("graph up",t)})),t.on("mouseEvent",(function(n){var o=n.e;switch(n.eventName){case"mouseDown":e.mouseDownMoveFlag=!o.state,e.mouseDownPos=o;break;case"mouseUp":e.mouseDownMoveFlag=!1,e.viewTranslate=Object.assign({},e.viewOffset);break;case"mouseMove":if(e.mouseDownMoveFlag){var i=e.viewTranslate,a=o.graphX-e.mouseDownPos.graphX+i.graphX||0,r=o.graphY-e.mouseDownPos.graphY+i.graphY||0;e.viewOffset={graphX:a,graphY:r},t.getView().setTranslate(a,r)}break;default:break}})),t.on("click",(function(t){var n=t.cell;n?(e.showAttrConfig=!0,e.nodeFrmData=Object.assign(n.data||{},{isNode:n._isNode,isEdge:n._isEdge})):e.showAttrConfig=!1})),this.graph=t,t.on("node:click",(function(t){var e=t.node;n(),e.attr("rect/stroke","orange")}))},newImage:function(t,e){return new D({shape:"image-bordered",width:94,height:40,data:{id:t},attrs:{rect:{stroke:"#108ee9",strokeWidth:2},image:{opacity:1,"xlink:href":e},body:{magnet:!1}},ports:{groups:{in:{position:"left",attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}},out:{position:"right",attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}}},items:[{id:"port1",group:"in"},{id:"port2",group:"out"}]}})},close:function(){this.showAttrConfig=!1},confirm:function(){var t=this.graph,e=t.getSelectedCell();e.setData(this.nodeFrmData);var n=e.style;if("html"===e.style.shape){e.style.html;var o=document.createElement("div");o.innerHTML=n.html,o.querySelector('[attr="name"]').innerText=this.nodeFrmData.name,n.html=o.innerHTML,e.setStyle(n)}else e.style.label=this.nodeFrmData.name;t.refresh(e),this.showAttrConfig=!1}},components:{Modal:b,Toolbar:_}},x=S,E=(n("3ae8"),Object(m["a"])(x,r,s,!1,null,null,null)),j=E.exports,F={name:"App",components:{EditorCom:j}},P=F,M=(n("5c0b"),Object(m["a"])(P,i,a,!1,null,null,null)),N=M.exports,T=n("5c96"),A=n.n(T);n("0fae"),n("5aea");o["default"].use(A.a),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(N)}}).$mount("#app")},"5aea":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),i=n.n(o);i.a},6186:function(t,e,n){},"91cc":function(t,e,n){"use strict";var o=n("2010"),i=n.n(o);i.a},"9c0c":function(t,e,n){},f5c4:function(t,e,n){}});
//# sourceMappingURL=app.b6232230.js.map